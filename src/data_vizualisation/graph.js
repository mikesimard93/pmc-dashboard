import Tree from 'react-tree-graph';
import React from "react";
import CircularProgress from '@material-ui/core/CircularProgress';
import Box from '@material-ui/core/Box';
import '../App.css';


const asana = require('asana');
const client = asana.Client.create().useAccessToken('1/130782075921760:ea95e018abbbc064e35274b2f6bc6cce'); // Mike's key

const Harvest = require('node-harvest-api')
const account_id = 1283808
const token = '2297874.pt.O_TLl_k0m8XTbi3eA5iXzoPkKHUftpx4Mp9Fq8zThEI8gqx2DY95hqJbDn5a0l9thCJEug23Z_UBuAh8sifVzw'
const app_name = 'PMC dashboard'
const harvest = new Harvest(account_id, token, app_name)
let entries = []
var entry_list_session = []
var startSessionDate = new Date(2021, 0, 10, 0, 0, 0, 0);

function Graph(props) {
    const [graph, updateGraph] = React.useState([]);
    const [dataLoaded, changeLoadStatus] = React.useState(false);
    var tree = {}
    React.useEffect(() => {
        test()
    }, [graph])

    var milestones = {}
    function getMilestones() {
        return new Promise(resolve => {
            client.tasks.searchInWorkspace('622159997203998', {'resource_subtype': 'milestone'})
                // ,opt_fields=['due_on','assignee','completed_at','custom_fields','name', 'created_at', 'resource_subtype'], opt_pretty=True
                .then((result) => {
                    resolve(result);
                });
        })
    }

    function getTask(task_gid) {
        return new Promise(resolve => {
            client.tasks.getTask(task_gid)
                .then((result) => {
                    resolve(result);
                });
        })
    }
    function getSubtask(task_gid) {
        return new Promise(resolve => {
            client.tasks.subtasks(task_gid)
                .then((result) => {
                    resolve(result);
                });
        })
    }

    function getDependencies(task_gid) {
        return new Promise(resolve => {
            client.tasks.dependencies(task_gid)
                .then((result) => {
                    resolve(result);
                });
        })
    }

    function fillObject(obj, task) {
        return new Promise(resolve => {
            const new_key = task.name
            obj.children.push( {
                gProps: {
                    className: 'red-node'
                },
                name: task.name,
                gid: task.gid,
                total_dependencies_time: 0.0,
                due_on: task.due_on,
                created_at: task.created_at,
                estimated_time: task.custom_fields[2].number_value,
                completed_at: task.completed_at,
                module: task.custom_fields[0].enum_value.name,
                type: task.resource_subtype,
                clocked_time: 0
            });

            resolve(obj);
        })
    }

    function recursive(task_dependencies, obj) {
        return new Promise(async resolve => {
            obj.children = new Array();
            var time = {
                        planned_time: 0,
                        clocked_time: 0
            }
            var time_under = {
                            planned_time: 0,
                            clocked_time: 0
            }
            for (var i = 0; i < task_dependencies.length; i++) {
                console.log(task_dependencies[i].name)
                var task_name_list = []
                const asana_sub_task = await getSubtask(task_dependencies[i].gid)
                for (var k = 0; k < asana_sub_task.data.length; k++) {
                    task_name_list.push(asana_sub_task.data[k].name)
                }
                task_name_list.push(task_dependencies[i].name)
                for (var j = 0; j < entry_list_session.length; j++) {
                    if (task_name_list.includes(entry_list_session[j].notes)) {
                        time.clocked_time += entry_list_session[j].hours
                    }
                }

                const dependency = await getTask(task_dependencies[i].gid)
                if (dependency.custom_fields[2].number_value !== null) {
                    time.planned_time += dependency.custom_fields[2].number_value
                }
                await fillObject(obj, dependency)
                var sub_task_dependencies = await getDependencies(dependency.gid)
                if (sub_task_dependencies.length !== 0) {
                    var time_under = await recursive(sub_task_dependencies, obj.children[obj.children.length - 1])
                }
                else {}
                time.planned_time += time_under.planned_time
                time.clocked_time += time_under.clocked_time
            }
            obj.total_dependencies_time = time.planned_time
            obj.clocked_time = time.clocked_time
            resolve(time);
        });
    }

    function keepMilestoneOnly(obj) {
        return new Promise(async resolve => {
            
            for (var i = 0; i < obj.children.length; i++) {
                if (obj.children[i].type !== "milestone") {
                    delete obj.children[i]
                    obj.children.length -= 1
                }
                else {
                    await keepMilestoneOnly(obj.children[i])
                }
            }

            if (obj.children.length == 0) {
                delete obj.children
            }
            resolve(obj);
        });
    }
    async function test() {
        var top_task
        const milestones = await getMilestones();
        entries = await harvest.time_entries.get({project_id: 24745864})
        for (var i =0; i < entries.length; i++) {
            var parts = entries[i].spent_date.split('-');
            var year = parts[0]
            var month = parts[1]
            var day = parts[2]
            var entry_date = new Date(year, month-1, day)
            if (entry_date > startSessionDate && entries[i].external_reference.id !== '1199598736876796') {
                entry_list_session.push(entries[i])
            }
        }
        for (var i = 0; i < milestones.data.length; i++) {
            const task = await getTask(milestones.data[i].gid);
            try {
                if (task.custom_fields[3].enum_value.name == 'Goal'){
                    top_task = task
                    break;
                }
            }
            catch(err){}
        }
        const dependencies = await getDependencies(top_task.gid)

        tree.name = top_task.name
        tree.children = new Array();
        await fillObject(tree, top_task)
        await recursive(dependencies, tree)
        console.log(tree)
        let milestonesTree = JSON.parse(JSON.stringify(tree))
        await keepMilestoneOnly(milestonesTree)
        // console.log(JSON.stringify(tree))
        console.log(milestonesTree)
        updateGraph(milestonesTree)
        changeLoadStatus(true)
        props.fromChildToParentCallback(milestonesTree.clocked_time)
        return milestonesTree
        
        // var string = {"name":"V0 Assemblée","children":[{"gProps":{"className":"red-node"},"name":"Propulsion assemblée complète","gid":"1199545431958062","total_dependencies_time":2844,"due_on":"2021-02-16","created_at":"2021-01-11T22:38:29.065Z","estimated_time":null,"completed_at":null,"module":"Propulsion","type":"milestone","clocked_time":2751.26,"children":[{"gProps":{"className":"red-node"},"name":"Propulsion assemblée 1 côté (1moteur)","gid":"1199545431958039","total_dependencies_time":1084,"due_on":"2021-02-15","created_at":"2021-01-11T22:23:41.198Z","estimated_time":null,"completed_at":null,"module":"Propulsion","type":"milestone","clocked_time":1064.7900000000002,"children":[{"gProps":{"className":"red-node"},"name":"Suspension assemblée","gid":"1199545431958021","total_dependencies_time":219,"due_on":"2021-02-05","created_at":"2021-01-11T22:14:28.227Z","estimated_time":null,"completed_at":null,"module":"Suspension","type":"milestone","clocked_time":222.89000000000004,"children":[{"gProps":{"className":"red-node"},"name":"Banc de test fonctionnel propulsion","gid":"1199546930556002","total_dependencies_time":139,"due_on":"2021-01-22","created_at":"2021-01-11T22:14:41.199Z","estimated_time":null,"completed_at":"2021-01-29T12:29:47.553Z","module":"Propulsion","type":"milestone","clocked_time":166.58,"children":[{"gProps":{"className":"red-node"},"name":"Assemblage du banc de test de propulsion","gid":"1199546930556045","total_dependencies_time":109,"due_on":"2021-01-21","created_at":"2021-01-11T22:55:12.721Z","estimated_time":30,"completed_at":"2021-01-24T21:33:01.047Z","module":"Propulsion","type":"default_task","clocked_time":162.58,"children":[{"gProps":{"className":"red-node"},"name":"Conception mécanique du banc de test de propulsion","gid":"1199546930556041","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:54:52.888Z","estimated_time":10,"completed_at":"2021-01-21T23:03:41.053Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception électrique du banc de test de propulsion","gid":"1199546930556037","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:53:47.361Z","estimated_time":10,"completed_at":"2021-01-21T23:03:08.920Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception logicielle du banc de test de propulsion","gid":"1199546930556028","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:49:42.965Z","estimated_time":25,"completed_at":"2021-01-21T23:03:28.099Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Lire les données sur le CANBUS et les log dans un csv","gid":"1199564096090094","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2021-01-15T14:41:19.343Z","estimated_time":4,"completed_at":"2021-01-26T20:13:05.331Z","module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Procédures de tests suspension","gid":"1199545431958057","total_dependencies_time":12,"due_on":"2021-02-08","created_at":"2021-01-11T22:33:37.395Z","estimated_time":null,"completed_at":null,"module":"Suspension","type":"milestone","clocked_time":11.84,"children":[{"gProps":{"className":"red-node"},"name":"Impression joints Suspension","gid":"1199602031389828","total_dependencies_time":7,"due_on":"2021-01-28","created_at":"2021-01-18T20:08:36.941Z","estimated_time":5,"completed_at":null,"module":"Suspension","type":"default_task","clocked_time":6.590000000000001,"children":[{"gProps":{"className":"red-node"},"name":"Cours d'usinage studio","gid":"1199545431958071","total_dependencies_time":0,"due_on":"2021-02-02","created_at":"2021-01-11T22:47:04.245Z","estimated_time":7,"completed_at":null,"module":"Suspension","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Étude stabilité dynamique Rover ","gid":"1199545431958082","total_dependencies_time":0,"due_on":"2021-01-25","created_at":"2021-01-11T23:09:47.323Z","estimated_time":10,"completed_at":null,"module":"Suspension","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Usinage Shafts ","gid":"1199594959818074","total_dependencies_time":7,"due_on":"2021-01-28","created_at":"2021-01-17T22:46:02.452Z","estimated_time":5,"completed_at":null,"module":"Suspension","type":"default_task","clocked_time":6.590000000000001,"children":[{"gProps":{"className":"red-node"},"name":"Cours d'usinage studio","gid":"1199545431958071","total_dependencies_time":0,"due_on":"2021-02-02","created_at":"2021-01-11T22:47:04.245Z","estimated_time":7,"completed_at":null,"module":"Suspension","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Récupération consommables au magasin","gid":"1199545431958043","total_dependencies_time":0,"due_on":"2021-01-18","created_at":"2021-01-11T22:24:15.750Z","estimated_time":5,"completed_at":"2021-01-17T22:44:40.183Z","module":"Suspension","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Étude stabilité statique Rover","gid":"1199545431958078","total_dependencies_time":0,"due_on":"2021-01-31","created_at":"2021-01-11T23:09:11.089Z","estimated_time":15,"completed_at":null,"module":"Suspension","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Moteurs roues assemblés (deux côtés)","gid":"1199594899825062","total_dependencies_time":865,"due_on":"2021-02-12","created_at":"2021-01-17T22:27:00.760Z","estimated_time":null,"completed_at":null,"module":"Propulsion","type":"milestone","clocked_time":841.9000000000001,"children":[{"gProps":{"className":"red-node"},"name":"Banc de test fonctionnel propulsion","gid":"1199546930556002","total_dependencies_time":139,"due_on":"2021-01-22","created_at":"2021-01-11T22:14:41.199Z","estimated_time":null,"completed_at":"2021-01-29T12:29:47.553Z","module":"Propulsion","type":"milestone","clocked_time":166.58,"children":[{"gProps":{"className":"red-node"},"name":"Assemblage du banc de test de propulsion","gid":"1199546930556045","total_dependencies_time":109,"due_on":"2021-01-21","created_at":"2021-01-11T22:55:12.721Z","estimated_time":30,"completed_at":"2021-01-24T21:33:01.047Z","module":"Propulsion","type":"default_task","clocked_time":162.58,"children":[{"gProps":{"className":"red-node"},"name":"Conception mécanique du banc de test de propulsion","gid":"1199546930556041","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:54:52.888Z","estimated_time":10,"completed_at":"2021-01-21T23:03:41.053Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception électrique du banc de test de propulsion","gid":"1199546930556037","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:53:47.361Z","estimated_time":10,"completed_at":"2021-01-21T23:03:08.920Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception logicielle du banc de test de propulsion","gid":"1199546930556028","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:49:42.965Z","estimated_time":25,"completed_at":"2021-01-21T23:03:28.099Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Lire les données sur le CANBUS et les log dans un csv","gid":"1199564096090094","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2021-01-15T14:41:19.343Z","estimated_time":4,"completed_at":"2021-01-26T20:13:05.331Z","module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Assemblage du système de propulsion","gid":"1199594899825048","total_dependencies_time":696,"due_on":"2021-02-11","created_at":"2021-01-17T22:25:06.491Z","estimated_time":30,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":667.32,"children":[{"gProps":{"className":"red-node"},"name":"Analyse des résultats et achats","gid":"1199594899825045","total_dependencies_time":328,"due_on":"2021-01-30","created_at":"2021-01-17T22:24:50.899Z","estimated_time":20,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":333.16,"children":[{"gProps":{"className":"red-node"},"name":"Tests propulsion","gid":"1199594899825042","total_dependencies_time":278,"due_on":"2021-01-28","created_at":"2021-01-17T22:24:29.128Z","estimated_time":50,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":333.16,"children":[{"gProps":{"className":"red-node"},"name":"Banc de test fonctionnel propulsion","gid":"1199546930556002","total_dependencies_time":139,"due_on":"2021-01-22","created_at":"2021-01-11T22:14:41.199Z","estimated_time":null,"completed_at":"2021-01-29T12:29:47.553Z","module":"Propulsion","type":"milestone","clocked_time":166.58,"children":[{"gProps":{"className":"red-node"},"name":"Assemblage du banc de test de propulsion","gid":"1199546930556045","total_dependencies_time":109,"due_on":"2021-01-21","created_at":"2021-01-11T22:55:12.721Z","estimated_time":30,"completed_at":"2021-01-24T21:33:01.047Z","module":"Propulsion","type":"default_task","clocked_time":162.58,"children":[{"gProps":{"className":"red-node"},"name":"Conception mécanique du banc de test de propulsion","gid":"1199546930556041","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:54:52.888Z","estimated_time":10,"completed_at":"2021-01-21T23:03:41.053Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception électrique du banc de test de propulsion","gid":"1199546930556037","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:53:47.361Z","estimated_time":10,"completed_at":"2021-01-21T23:03:08.920Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception logicielle du banc de test de propulsion","gid":"1199546930556028","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:49:42.965Z","estimated_time":25,"completed_at":"2021-01-21T23:03:28.099Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Lire les données sur le CANBUS et les log dans un csv","gid":"1199564096090094","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2021-01-15T14:41:19.343Z","estimated_time":4,"completed_at":"2021-01-26T20:13:05.331Z","module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Impression variations de roues","gid":"1199598736876766","total_dependencies_time":0,"due_on":"2021-01-29","created_at":"2021-01-18T02:10:46.286Z","estimated_time":null,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Impression 6 roues","gid":"1199594899825087","total_dependencies_time":328,"due_on":"2021-02-04","created_at":"2021-01-17T22:31:16.064Z","estimated_time":20,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":333.16,"children":[{"gProps":{"className":"red-node"},"name":"Tests propulsion","gid":"1199594899825042","total_dependencies_time":278,"due_on":"2021-01-28","created_at":"2021-01-17T22:24:29.128Z","estimated_time":50,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":333.16,"children":[{"gProps":{"className":"red-node"},"name":"Banc de test fonctionnel propulsion","gid":"1199546930556002","total_dependencies_time":139,"due_on":"2021-01-22","created_at":"2021-01-11T22:14:41.199Z","estimated_time":null,"completed_at":"2021-01-29T12:29:47.553Z","module":"Propulsion","type":"milestone","clocked_time":166.58,"children":[{"gProps":{"className":"red-node"},"name":"Assemblage du banc de test de propulsion","gid":"1199546930556045","total_dependencies_time":109,"due_on":"2021-01-21","created_at":"2021-01-11T22:55:12.721Z","estimated_time":30,"completed_at":"2021-01-24T21:33:01.047Z","module":"Propulsion","type":"default_task","clocked_time":162.58,"children":[{"gProps":{"className":"red-node"},"name":"Conception mécanique du banc de test de propulsion","gid":"1199546930556041","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:54:52.888Z","estimated_time":10,"completed_at":"2021-01-21T23:03:41.053Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception électrique du banc de test de propulsion","gid":"1199546930556037","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:53:47.361Z","estimated_time":10,"completed_at":"2021-01-21T23:03:08.920Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception logicielle du banc de test de propulsion","gid":"1199546930556028","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:49:42.965Z","estimated_time":25,"completed_at":"2021-01-21T23:03:28.099Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Lire les données sur le CANBUS et les log dans un csv","gid":"1199564096090094","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2021-01-15T14:41:19.343Z","estimated_time":4,"completed_at":"2021-01-26T20:13:05.331Z","module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Impression variations de roues","gid":"1199598736876766","total_dependencies_time":0,"due_on":"2021-01-29","created_at":"2021-01-18T02:10:46.286Z","estimated_time":null,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":0}]}]}]}]}]},{"gProps":{"className":"red-node"},"name":"Moteurs roues assemblés (deux côtés)","gid":"1199594899825062","total_dependencies_time":865,"due_on":"2021-02-12","created_at":"2021-01-17T22:27:00.760Z","estimated_time":null,"completed_at":null,"module":"Propulsion","type":"milestone","clocked_time":841.9000000000001,"children":[{"gProps":{"className":"red-node"},"name":"Banc de test fonctionnel propulsion","gid":"1199546930556002","total_dependencies_time":139,"due_on":"2021-01-22","created_at":"2021-01-11T22:14:41.199Z","estimated_time":null,"completed_at":"2021-01-29T12:29:47.553Z","module":"Propulsion","type":"milestone","clocked_time":166.58,"children":[{"gProps":{"className":"red-node"},"name":"Assemblage du banc de test de propulsion","gid":"1199546930556045","total_dependencies_time":109,"due_on":"2021-01-21","created_at":"2021-01-11T22:55:12.721Z","estimated_time":30,"completed_at":"2021-01-24T21:33:01.047Z","module":"Propulsion","type":"default_task","clocked_time":162.58,"children":[{"gProps":{"className":"red-node"},"name":"Conception mécanique du banc de test de propulsion","gid":"1199546930556041","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:54:52.888Z","estimated_time":10,"completed_at":"2021-01-21T23:03:41.053Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception électrique du banc de test de propulsion","gid":"1199546930556037","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:53:47.361Z","estimated_time":10,"completed_at":"2021-01-21T23:03:08.920Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception logicielle du banc de test de propulsion","gid":"1199546930556028","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:49:42.965Z","estimated_time":25,"completed_at":"2021-01-21T23:03:28.099Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Lire les données sur le CANBUS et les log dans un csv","gid":"1199564096090094","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2021-01-15T14:41:19.343Z","estimated_time":4,"completed_at":"2021-01-26T20:13:05.331Z","module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Assemblage du système de propulsion","gid":"1199594899825048","total_dependencies_time":696,"due_on":"2021-02-11","created_at":"2021-01-17T22:25:06.491Z","estimated_time":30,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":667.32,"children":[{"gProps":{"className":"red-node"},"name":"Analyse des résultats et achats","gid":"1199594899825045","total_dependencies_time":328,"due_on":"2021-01-30","created_at":"2021-01-17T22:24:50.899Z","estimated_time":20,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":333.16,"children":[{"gProps":{"className":"red-node"},"name":"Tests propulsion","gid":"1199594899825042","total_dependencies_time":278,"due_on":"2021-01-28","created_at":"2021-01-17T22:24:29.128Z","estimated_time":50,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":333.16,"children":[{"gProps":{"className":"red-node"},"name":"Banc de test fonctionnel propulsion","gid":"1199546930556002","total_dependencies_time":139,"due_on":"2021-01-22","created_at":"2021-01-11T22:14:41.199Z","estimated_time":null,"completed_at":"2021-01-29T12:29:47.553Z","module":"Propulsion","type":"milestone","clocked_time":166.58,"children":[{"gProps":{"className":"red-node"},"name":"Assemblage du banc de test de propulsion","gid":"1199546930556045","total_dependencies_time":109,"due_on":"2021-01-21","created_at":"2021-01-11T22:55:12.721Z","estimated_time":30,"completed_at":"2021-01-24T21:33:01.047Z","module":"Propulsion","type":"default_task","clocked_time":162.58,"children":[{"gProps":{"className":"red-node"},"name":"Conception mécanique du banc de test de propulsion","gid":"1199546930556041","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:54:52.888Z","estimated_time":10,"completed_at":"2021-01-21T23:03:41.053Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception électrique du banc de test de propulsion","gid":"1199546930556037","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:53:47.361Z","estimated_time":10,"completed_at":"2021-01-21T23:03:08.920Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception logicielle du banc de test de propulsion","gid":"1199546930556028","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:49:42.965Z","estimated_time":25,"completed_at":"2021-01-21T23:03:28.099Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Lire les données sur le CANBUS et les log dans un csv","gid":"1199564096090094","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2021-01-15T14:41:19.343Z","estimated_time":4,"completed_at":"2021-01-26T20:13:05.331Z","module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Impression variations de roues","gid":"1199598736876766","total_dependencies_time":0,"due_on":"2021-01-29","created_at":"2021-01-18T02:10:46.286Z","estimated_time":null,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Impression 6 roues","gid":"1199594899825087","total_dependencies_time":328,"due_on":"2021-02-04","created_at":"2021-01-17T22:31:16.064Z","estimated_time":20,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":333.16,"children":[{"gProps":{"className":"red-node"},"name":"Tests propulsion","gid":"1199594899825042","total_dependencies_time":278,"due_on":"2021-01-28","created_at":"2021-01-17T22:24:29.128Z","estimated_time":50,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":333.16,"children":[{"gProps":{"className":"red-node"},"name":"Banc de test fonctionnel propulsion","gid":"1199546930556002","total_dependencies_time":139,"due_on":"2021-01-22","created_at":"2021-01-11T22:14:41.199Z","estimated_time":null,"completed_at":"2021-01-29T12:29:47.553Z","module":"Propulsion","type":"milestone","clocked_time":166.58,"children":[{"gProps":{"className":"red-node"},"name":"Assemblage du banc de test de propulsion","gid":"1199546930556045","total_dependencies_time":109,"due_on":"2021-01-21","created_at":"2021-01-11T22:55:12.721Z","estimated_time":30,"completed_at":"2021-01-24T21:33:01.047Z","module":"Propulsion","type":"default_task","clocked_time":162.58,"children":[{"gProps":{"className":"red-node"},"name":"Conception mécanique du banc de test de propulsion","gid":"1199546930556041","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:54:52.888Z","estimated_time":10,"completed_at":"2021-01-21T23:03:41.053Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception électrique du banc de test de propulsion","gid":"1199546930556037","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:53:47.361Z","estimated_time":10,"completed_at":"2021-01-21T23:03:08.920Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Conception logicielle du banc de test de propulsion","gid":"1199546930556028","total_dependencies_time":15,"due_on":"2021-01-18","created_at":"2021-01-11T22:49:42.965Z","estimated_time":25,"completed_at":"2021-01-21T23:03:28.099Z","module":"Propulsion","type":"default_task","clocked_time":35.03,"children":[{"gProps":{"className":"red-node"},"name":"Conception générale du banc de test de propulsion","gid":"1199546930556027","total_dependencies_time":0,"due_on":"2021-01-11","created_at":"2021-01-11T22:49:00.860Z","estimated_time":15,"completed_at":"2021-01-29T12:29:30.263Z","module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Lire les données sur le CANBUS et les log dans un csv","gid":"1199564096090094","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2021-01-15T14:41:19.343Z","estimated_time":4,"completed_at":"2021-01-26T20:13:05.331Z","module":"Propulsion","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Impression variations de roues","gid":"1199598736876766","total_dependencies_time":0,"due_on":"2021-01-29","created_at":"2021-01-18T02:10:46.286Z","estimated_time":null,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":0}]}]}]}]},{"gProps":{"className":"red-node"},"name":"Créer le noeud ROS de commande (version simplifiée)","gid":"1199598736876743","total_dependencies_time":0,"due_on":"2021-02-11","created_at":"2021-01-17T22:34:43.040Z","estimated_time":30,"completed_at":null,"module":"Propulsion","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Différentiel assemblé et incorporé au chassis","gid":"1199594876184253","total_dependencies_time":71,"due_on":"2021-02-12","created_at":"2021-01-16T21:27:10.007Z","estimated_time":null,"completed_at":null,"module":"Chassis","type":"milestone","clocked_time":82.5,"children":[{"gProps":{"className":"red-node"},"name":"Chassis assemblé","gid":"1199594876184251","total_dependencies_time":13,"due_on":"2021-02-01","created_at":"2021-01-16T21:26:57.165Z","estimated_time":null,"completed_at":null,"module":"Chassis","type":"milestone","clocked_time":16.88,"children":[{"gProps":{"className":"red-node"},"name":"CAD chassis à jour","gid":"1199575009399623","total_dependencies_time":5,"due_on":"2021-01-22","created_at":"2021-01-14T15:24:05.453Z","estimated_time":null,"completed_at":"2021-01-27T23:27:57.389Z","module":"Chassis","type":"milestone","clocked_time":6.95,"children":[{"gProps":{"className":"red-node"},"name":"CAD OnShape","gid":"1199594876184309","total_dependencies_time":0,"due_on":"2021-01-21","created_at":"2021-01-16T21:59:18.214Z","estimated_time":5,"completed_at":"2021-01-27T22:05:28.653Z","module":"Chassis","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Faire les formations pour l'usinage","gid":"1199594876184292","total_dependencies_time":0,"due_on":"2021-01-31","created_at":"2021-01-16T21:47:42.159Z","estimated_time":3,"completed_at":null,"module":"Chassis","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Achat des matériaux","gid":"1199594876184277","total_dependencies_time":0,"due_on":"2021-02-01","created_at":"2021-01-16T21:39:18.303Z","estimated_time":1,"completed_at":null,"module":"Chassis","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Fabrication des pièces","gid":"1199594876184300","total_dependencies_time":0,"due_on":"2021-02-11","created_at":"2021-01-16T21:56:34.561Z","estimated_time":15,"completed_at":null,"module":"Chassis","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Faire les formations pour l'usinage","gid":"1199594876184292","total_dependencies_time":0,"due_on":"2021-01-31","created_at":"2021-01-16T21:47:42.159Z","estimated_time":3,"completed_at":null,"module":"Chassis","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Téléopération du bras","gid":"1199566342788420","total_dependencies_time":36,"due_on":"2021-02-08","created_at":"2021-01-13T15:58:30.261Z","estimated_time":null,"completed_at":null,"module":"Bras","type":"milestone","clocked_time":13.37,"children":[{"gProps":{"className":"red-node"},"name":"Créer noeud ROS de téléop","gid":"1199566342788435","total_dependencies_time":0,"due_on":"2021-02-01","created_at":"2021-01-13T16:01:49.360Z","estimated_time":4,"completed_at":"2021-01-27T17:00:46.353Z","module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Communication ROS et Bras","gid":"1199566342788403","total_dependencies_time":0,"due_on":"2021-02-01","created_at":"2021-01-13T15:55:10.146Z","estimated_time":8,"completed_at":null,"module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Validation de la simulation","gid":"1199566342788450","total_dependencies_time":0,"due_on":"2021-02-01","created_at":"2021-01-13T16:07:52.407Z","estimated_time":4,"completed_at":null,"module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Test J1 avec load","gid":"1199606659243510","total_dependencies_time":0,"due_on":"2021-02-01","created_at":"2021-01-18T22:50:34.966Z","estimated_time":10,"completed_at":null,"module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Test J4 et J5 avec load","gid":"1199708863809028","total_dependencies_time":0,"due_on":"2021-02-01","created_at":"2021-01-28T23:51:05.320Z","estimated_time":10,"completed_at":null,"module":"Bras","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Sensor board fonctionnel avec jetson","gid":"1199564096090042","total_dependencies_time":61,"due_on":"2021-02-15","created_at":"2021-01-14T13:26:46.341Z","estimated_time":null,"completed_at":null,"module":"Contrôle","type":"milestone","clocked_time":27.060000000000002,"children":[{"gProps":{"className":"red-node"},"name":"Acheter équipement contrôle","gid":"1199545613238268","total_dependencies_time":0,"due_on":"2021-01-18","created_at":"2021-01-11T20:27:42.520Z","estimated_time":1,"completed_at":"2021-01-22T16:33:28.153Z","module":"Contrôle","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Faire fonctionner les LIDARS","gid":"1199564096090050","total_dependencies_time":0,"due_on":"2021-01-29","created_at":"2021-01-14T13:29:48.899Z","estimated_time":8,"completed_at":null,"module":"Contrôle","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Faire fonctionner les GPS","gid":"1199564096090045","total_dependencies_time":0,"due_on":"2021-01-22","created_at":"2021-01-14T13:28:26.290Z","estimated_time":4,"completed_at":"2021-01-28T14:15:40.385Z","module":"Contrôle","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Interfacer tous les capteurs sur le jetson","gid":"1199564096090076","total_dependencies_time":28,"due_on":"2021-02-12","created_at":"2021-01-14T13:47:47.855Z","estimated_time":20,"completed_at":null,"module":"Contrôle","type":"default_task","clocked_time":10.43,"children":[{"gProps":{"className":"red-node"},"name":"Fusionner les données des 4 LIDARs","gid":"1199564096090054","total_dependencies_time":8,"due_on":"2021-02-05","created_at":"2021-01-14T13:30:47.948Z","estimated_time":8,"completed_at":null,"module":"Contrôle","type":"default_task","clocked_time":0.45,"children":[{"gProps":{"className":"red-node"},"name":"Faire fonctionner les LIDARS","gid":"1199564096090050","total_dependencies_time":0,"due_on":"2021-01-29","created_at":"2021-01-14T13:29:48.899Z","estimated_time":8,"completed_at":null,"module":"Contrôle","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Faire fonctionner les GPS","gid":"1199564096090045","total_dependencies_time":0,"due_on":"2021-01-22","created_at":"2021-01-14T13:28:26.290Z","estimated_time":4,"completed_at":"2021-01-28T14:15:40.385Z","module":"Contrôle","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Interface de contrôle manuel","gid":"1199574243267039","total_dependencies_time":5,"due_on":"2021-02-15","created_at":"2021-01-14T14:32:22.297Z","estimated_time":null,"completed_at":null,"module":"Contrôle","type":"milestone","clocked_time":3.54,"children":[{"gProps":{"className":"red-node"},"name":"Setup de l'interface","gid":"1199574243267049","total_dependencies_time":0,"due_on":"2021-02-08","created_at":"2021-01-14T14:33:34.100Z","estimated_time":5,"completed_at":null,"module":"Contrôle","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Harnais Électrique V01","gid":"1199595577591923","total_dependencies_time":155,"due_on":"2021-02-15","created_at":"2021-01-17T18:16:23.761Z","estimated_time":null,"completed_at":null,"module":"Puissance","type":"milestone","clocked_time":23,"children":[{"gProps":{"className":"red-node"},"name":"Schéma Électrique","gid":"1199595577591935","total_dependencies_time":45,"due_on":"2021-02-03","created_at":"2021-01-17T18:29:47.953Z","estimated_time":null,"completed_at":null,"module":"Puissance","type":"milestone","clocked_time":6.5,"children":[{"gProps":{"className":"red-node"},"name":"Schéma Électrique","gid":"1199576549956530","total_dependencies_time":15,"due_on":"2021-02-02","created_at":"2021-01-14T13:31:35.198Z","estimated_time":30,"completed_at":null,"module":"Puissance","type":"default_task","clocked_time":6.5,"children":[{"gProps":{"className":"red-node"},"name":"Valider consommation suite aux modifications","gid":"1199576549956534","total_dependencies_time":0,"due_on":"2021-01-22","created_at":"2021-01-14T13:35:07.366Z","estimated_time":15,"completed_at":"2021-01-25T00:33:49.712Z","module":"Puissance","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Fabrication du harnais V01","gid":"1199576549956523","total_dependencies_time":45,"due_on":"2021-02-14","created_at":"2021-01-14T13:25:53.018Z","estimated_time":40,"completed_at":null,"module":"Puissance","type":"default_task","clocked_time":6.5,"children":[{"gProps":{"className":"red-node"},"name":"Schéma Électrique","gid":"1199576549956530","total_dependencies_time":15,"due_on":"2021-02-02","created_at":"2021-01-14T13:31:35.198Z","estimated_time":30,"completed_at":null,"module":"Puissance","type":"default_task","clocked_time":6.5,"children":[{"gProps":{"className":"red-node"},"name":"Valider consommation suite aux modifications","gid":"1199576549956534","total_dependencies_time":0,"due_on":"2021-01-22","created_at":"2021-01-14T13:35:07.366Z","estimated_time":15,"completed_at":"2021-01-25T00:33:49.712Z","module":"Puissance","type":"default_task","clocked_time":0}]}]},{"gProps":{"className":"red-node"},"name":"Choix de batterie","gid":"1199595577591928","total_dependencies_time":25,"due_on":"2021-01-27","created_at":"2021-01-17T18:21:39.463Z","estimated_time":null,"completed_at":null,"module":"Puissance","type":"milestone","clocked_time":10,"children":[{"gProps":{"className":"red-node"},"name":"Choisir une batterie","gid":"1199595577663271","total_dependencies_time":15,"due_on":"2021-01-26","created_at":"2021-01-17T19:29:55.400Z","estimated_time":10,"completed_at":null,"module":"Puissance","type":"default_task","clocked_time":6.5,"children":[{"gProps":{"className":"red-node"},"name":"Valider consommation suite aux modifications","gid":"1199576549956534","total_dependencies_time":0,"due_on":"2021-01-22","created_at":"2021-01-14T13:35:07.366Z","estimated_time":15,"completed_at":"2021-01-25T00:33:49.712Z","module":"Puissance","type":"default_task","clocked_time":0}]}]}]},{"gProps":{"className":"red-node"},"name":"Bras assemblé","gid":"1199566342788391","total_dependencies_time":90,"due_on":"2021-02-01","created_at":"2021-01-13T15:48:33.576Z","estimated_time":null,"completed_at":null,"module":"Bras","type":"milestone","clocked_time":66.26,"children":[{"gProps":{"className":"red-node"},"name":"Ajustement Design J1 V1","gid":"1199566342788473","total_dependencies_time":0,"due_on":"2021-01-25","created_at":"2021-01-13T16:19:39.180Z","estimated_time":24,"completed_at":"2021-01-18T15:09:26.479Z","module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Design et impression bracket","gid":"1199563882921069","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2021-01-13T16:11:50.366Z","estimated_time":16,"completed_at":null,"module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Design J2 v0","gid":"1199563882921044","total_dependencies_time":0,"due_on":"2021-02-15","created_at":"2021-01-13T16:08:19.568Z","estimated_time":20,"completed_at":null,"module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Ajustement J4 et J5 V1","gid":"1199566342788487","total_dependencies_time":0,"due_on":"2021-01-25","created_at":"2021-01-13T16:25:17.025Z","estimated_time":24,"completed_at":"2021-01-28T16:10:09.430Z","module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Impression et Assemblage V2 J1","gid":"1199605764320520","total_dependencies_time":0,"due_on":"2021-02-01","created_at":"2021-01-18T20:31:42.774Z","estimated_time":6,"completed_at":null,"module":"Bras","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Simulation du bras complète","gid":"1199566342788393","total_dependencies_time":46,"due_on":"2021-01-28","created_at":"2021-01-13T15:48:52.370Z","estimated_time":null,"completed_at":null,"module":"Bras","type":"milestone","clocked_time":32.61000000000001,"children":[{"gProps":{"className":"red-node"},"name":"Création de la simulation gazebo du bras","gid":"1199669576377317","total_dependencies_time":0,"due_on":null,"created_at":"2020-12-22T20:49:33.394Z","estimated_time":36,"completed_at":"2021-01-21T18:50:31.300Z","module":"Bras","type":"default_task","clocked_time":0},{"gProps":{"className":"red-node"},"name":"Programmation de l'architecture du bras","gid":"1199225857095957","total_dependencies_time":0,"due_on":"2021-01-28","created_at":"2020-11-18T21:25:57.505Z","estimated_time":10,"completed_at":null,"module":"Bras","type":"default_task","clocked_time":0}]},{"gProps":{"className":"red-node"},"name":"Communication fonctionnel et testée","gid":"1199564096090039","total_dependencies_time":10,"due_on":"2021-02-12","created_at":"2021-01-13T20:56:06.696Z","estimated_time":20,"completed_at":null,"module":"Contrôle","type":"milestone","clocked_time":3.0300000000000002,"children":[{"gProps":{"className":"red-node"},"name":"Définir plan de test communication","gid":"1199545613238280","total_dependencies_time":0,"due_on":"2021-01-18","created_at":"2021-01-11T20:42:50.951Z","estimated_time":10,"completed_at":"2021-01-17T18:18:17.148Z","module":"Contrôle","type":"default_task","clocked_time":0}]}],"total_dependencies_time":3338,"clocked_time":3003.390000000001}

    
    }

    return (
        <div >
            {(function () {
                if (!dataLoaded) {
                    return <Box > <CircularProgress size={40} />
                    <Box pt={2}>May take several minutes to load..</Box>
                    </Box>
                } else {
                    return <Tree
                        data={graph}
                        nodeRadius={30}
                        height={2000}
                        width={1500}/>;
                }
            })()}
        </div>
    );
}

export default Graph;